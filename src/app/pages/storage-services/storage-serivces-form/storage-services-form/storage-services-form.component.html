<div *ngIf="storageService">
    <p-toolbar>
        <div class="p-toolbar-group-left">
            <h5 class="toolbar-header">
                Storage Service
            </h5>
        </div>
        <div class="p-toolbar-group-right">
            <div class="p-toolbar-group-right">
                <div *ngIf="!new && editing">
                    <p-button class="mr-2"  label="Edit" iconPos="left" icon="pi pi-pencil"
                        (click)="edit()">
                    </p-button>
                    <p-button label="Close" class="mr-2" (click)="cancel()"></p-button>
                </div>
                <div *ngIf="new && !editing">
                    <button class="mr-2 p-button-outlined"  label="Save" iconPos="left" pButton
                        pRipple type="button" icon="pi pi-check" (click)="save()"></button>
                    <button pButton pRipple type="button" label="Cancel" id="cancel-save" class="p-button-outlined"
                        (click)="cancel()"></button>
                </div>
            </div>
        </div>
    </p-toolbar>
    <!-- <app-storage-services-form-fields [editing]="editing" 
    [new]="new" [(storageService)]="storageService"
                 [(storageProps)]="storageProps"
                 [(storageServiceGroup)]="storageServiceGroup"
    ></app-storage-services-form-fields> -->

    <div class="card">
        <form  #mtoForm="ngForm">
            <div class="card p-fluid p-formgrid p-grid">
               <div class="form-group">
                   <h5>Services</h5>
                   <div>
                       <div class="input-group"> 
                         <label for="id" class="block input-label">Id</label>
                          <input class="input-field" type="text" id="serviceId" name="serviceId" pInputText 
                           placeholder="service id"
                          [(ngModel)]="storageService.serviceId" 
                          #feedback="ngModel"
                          required
                          ng-invalid ng-dirty ng-touched
                          > 
                       </div>
                  <small *ngIf="feedback.invalid && feedback.touched && feedback.dirty"   class="error">Service Id is required</small> 
                   </div>
                  <div>
                      <div class="input-group">
                       <label for="secret" class="block input-label">Secret</label> <input class="input-field" 
                       type="text" id="secret" name="secret" pInputText
                       placeholder="secret"
                       [(ngModel)]="storageService.secretKey"
                       #feedback="ngModel"
                         required
                         ng-invalid ng-dirty ng-touched
                       > 
                     </div>
                     <small *ngIf="feedback.invalid && feedback.touched && feedback.dirty"   class="error">Secret is required</small> 
                  </div>
    
                  <div>
                      <div class="input-group">
                        <label for="name"  class="block input-label">Name</label> <input class="input-field" 
                        type="text" id="name" name="name" pInputText
                        placeholder="name"
                        [(ngModel)]="storageService.name"
                        #feedback="ngModel"
                          required  ng-invalid ng-dirty ng-touched> 
                      </div>
                  <small *ngIf="feedback.invalid && feedback.touched && feedback.dirty"   class="error">Service Id is required</small> 

                  </div>
    
                  <div>
                      <div class="input-group">
                        <label for="description"  class="block input-label">Description</label>
                         <input class="input-field"   type="text" id="description" name="description"
                         placeholder="description"
                         pInputText [(ngModel)]="storageService.description" 
                          #feedback="ngModel"
                          required
                          ng-invalid ng-dirty ng-touched> 
                      </div>
                  <small *ngIf="feedback.invalid && feedback.touched && feedback.dirty"   class="error">Name is required</small> 
                  </div>
    
                  <div>

                      <div class="input-group">
                        <label for="type" class="block input-label">Type</label>
                        <p-dropdown class="input-field" 
                        [options]="serviceTypes"  optionLabel="param_name" 
                        [(ngModel)]="storageService.serviceType"
                        (ngModelChange)="onChange($event)"
                        optionValue="param_value" 
                        placeholder="service type"
                        [ngModelOptions]="{standalone: true}"
                        #feedback="ngModel"
                          required
                          ng-invalid ng-dirty ng-touched
                        ></p-dropdown>
                    </div>
                  <small *ngIf="feedback.invalid && feedback.touched && feedback.dirty"   class="error">Type is required</small> 

                  </div>
    
               </div>
               <div class="form-group" *ngIf="templates&&templates.length>0">
                <h5>Properties</h5>
             
                <div  *ngFor="let s of storageProps">
                    <div class="input-group" >
                      <label for="id" class="block input-label" >{{s.label}}</label>
                      <input class="input-field" [type]="s.dataType" pInputText 
                      [placeholder]="s.label"
                      [(ngModel)]="storageServicePropoerties[s.name]"
                      [name]="s.name" [id]="s.id" #feedback="ngModel"
                      [required] ="s.required"
                      ng-invalid ng-dirty
                      > 
                  </div>
                  <small *ngIf="feedback.invalid && feedback.touched && feedback.dirty"   class="error">{{s.label}} is required</small>
                </div>
               </div>
            </div>
          
            
        </form>
    </div>
    
</div>
